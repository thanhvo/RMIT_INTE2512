<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>viettranvuhoa</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>ass2/src/sample/Main.java</CENTER></H3><HR>
<PRE>
/*
  RMIT University Vietnam
  Course: INTE2512 Object-Oriented Programming
  Semester: 2019C
  Assessment: Assignment 2
  Author: Tran Vu Hoang Viet
  ID: 3740797
  Created  date: 11/12/2019
  Last modified: 16/12/2019
  Acknowledgement:
  [1]&quot;Overview (JavaFX 8)&quot;, Docs.oracle.com, 2019. [Online]. Available: https://docs.oracle.com/javase/8/javafx/api/overview-summary.html. [Accessed: 16- Dec- 2019].
  [2]&quot;MyApps Portal&quot;, Rmit.instructure.com, 2019. [Online]. Available: https://rmit.instructure.com/courses/68318/pages/w6-whats-happening-this-week?module_item_id=1953827. [Accessed: 16- Dec- 2019].
  [3]&quot;MyApps Portal&quot;, Rmit.instructure.com, 2019. [Online]. Available: https://rmit.instructure.com/courses/68318/pages/w8-whats-happening-this-week?module_item_id=1953831. [Accessed: 16- Dec- 2019].
*/

package sample;
import javafx.animation.KeyFrame;
import javafx.animation.RotateTransition;
import javafx.animation.Timeline;
import javafx.application.Application;
import javafx.application.Platform;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.TextField;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.*;
import javafx.scene.media.Media;
import javafx.scene.media.MediaPlayer;
import javafx.scene.paint.Color;
<A NAME="10"></A>import javafx.scene.paint.Paint;
import javafx.scene.shape.Rectangle;
import javafx.scene.text.Text;
<FONT color="#b041ff"><A HREF="javascript:ZweiFrames('match12-1.html#10',3,'match12-top.html#10',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>import javafx.scene.transform.Rotate;
import javafx.stage.Stage;
import javafx.util.Duration;

import java.io.File;
import java.util.*;
public class Main extends Application {
    View view = new View();
<A NAME="11"></A>    @Override
    public void start(Stage primaryStage) throws Exception {
        view.setSoundButton</B></FONT>();
        view.stage.setScene(<FONT color="#571b7e"><A HREF="javascript:ZweiFrames('match12-1.html#11',3,'match12-top.html#11',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>new Scene(view.setOpeningScene(), 700, 600));
        view.stage.show();
    }
    public static void main(String[] args) {
        launch(args);
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>ass2/src/sample/Model.java</CENTER></H3><HR>
<PRE>
package sample;

import javafx.animation.KeyFrame;
import javafx.animation.Timeline;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.control.Label;
import javafx.util.Duration;

import javax.swing.*;
import java.lang.management.ClassLoadingMXBean;
import java.sql.Time;
import java.util.Arrays;
import java.util.Collections;
<A NAME="12"></A>import java.util.List;

public class Model {
    <FONT color="#3b9c9c"><A HREF="javascript:ZweiFrames('match12-1.html#12',3,'match12-top.html#12',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>public List&lt;String&gt; getRandPlayer() {
        String[] url = new String[20];
        for (int i = 0; i &lt; 10; i++) {
            url[i] = String.valueOf(i) + &quot;.jpg&quot;;
            url[i + 10] = String.valueOf(i) + &quot;.jpg&quot;;
        }
        List&lt;String&gt; u = Arrays.asList(url);
        Collections.shuffle(u);
        return u;
    }</B></FONT>
}
</PRE>
<HR>
<H3><CENTER>ass2/src/sample/View.java</CENTER></H3><HR>
<PRE>
<A NAME="0"></A>package sample;

<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match12-1.html#0',3,'match12-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>import javafx.animation.KeyFrame;
import javafx.animation.RotateTransition;
import javafx.animation.Timeline;
import javafx.application.Platform;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Pane;
import javafx.scene.media.Media;
import javafx.scene.media.MediaPlayer;
import javafx.scene.paint.Color;
import javafx.scene.paint.Paint;
import javafx.scene.shape.Rectangle;
import javafx.scene.text.Text;
import javafx.scene.transform.Rotate;
import javafx.stage.Stage;
import javafx.util.Duration;

import java.io.File;
import java.util.List;

public class View {
    private int score = 0</B></FONT>;
<A NAME="1"></A>    private RotateTransition rt;
    private Timeline time = new Timeline();
    private Timeline timeline = new Timeline();
    <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match12-1.html#1',3,'match12-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>private Button start = new Button(&quot;Start&quot;);
    private Button sound = new Button();
    private Button aReturn = new Button(&quot;Return&quot;);
    private Button quitGame = new Button(&quot;Quit game&quot;);
    private Model model = new Model();
    private List&lt;String&gt; randomPlayer;
<A NAME="2"></A>    public Stage stage = new</B></FONT> Stage();
    private int level;
    private ImageView[] iv = new ImageView[20];
    private ImageView background = new ImageView(<FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match12-1.html#2',3,'match12-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>new Image(&quot;background.jpg&quot;));
    private Image image = new Image(&quot;image1.jpg&quot;);
    private Media media = new Media(new File(&quot;sound.mp3&quot;).toURI().toString());
    private MediaPlayer mediaPlayer = new MediaPlayer(media);
    private String[] selectedCard = new String[2]</B></FONT>;
    private int[] selectedValue = new int[2];

    void setSoundButton() {
        ImageView iv1 = new ImageView(new Image(&quot;sound_button.jpg&quot;));
        ImageView iv2 = new ImageView(new Image(&quot;mute_sound.jpg&quot;));
        iv1.setFitHeight(20);
        iv1.setFitWidth(20);
        iv2.setFitHeight(20);
        iv2.setFitWidth(20);
        var ref = new Object() {
            boolean i = true;
        };
        sound.setGraphic(iv1);
        sound.setOnAction(actionEvent -&gt; {
            if (ref.i) {
                sound.setGraphic(iv2);

                mediaPlayer.setVolume(0);
                ref.i = false;
            } else {
                sound.setGraphic(iv1);
                ref.i = true;
                mediaPlayer.setVolume(1);
            }
        });
    }

    private Text setTimer() {
<A NAME="3"></A>        final int[] minute = {2};
        final int[] second = {0};
        final int[] hundredSecond = {0};
        <FONT color="#6cc417"><A HREF="javascript:ZweiFrames('match12-1.html#3',3,'match12-top.html#3',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>Text text = new Text(Integer.toString(minute[0]) + &quot;:&quot; + Integer.toString(second[0]) + &quot;: &quot; + Integer.toString(hundredSecond[0]));
        text.setFill(Color.YELLOW);
        time.setCycleCount(Timeline.INDEFINITE);
        time.getKeyFrames</B></FONT>().add(new KeyFrame(Duration.millis(10), new EventHandler&lt;ActionEvent&gt;() {
            @Override
            public void handle(ActionEvent actionEvent) {
                if (second[0] &lt; 0) {
                    minute[0]--;
                    second[0] = 59;
                }
                if (hundredSecond[0] &lt; 0) {
                    second[0]--;
                    hundredSecond[0] = 99;
                }

                hundredSecond[0]--;
                text.setText(Integer.toString(minute[0]) + &quot;: &quot; + Integer.toString(second[0]) + &quot;: &quot; + Integer.toString(hundredSecond[0]));
                if (minute[0] == 0 &amp;&amp; second[0] == 0 &amp;&amp; hundredSecond[0] == 0) {
                    stage.setScene(new Scene(setGameOverScene(), 700, 600));
                    time.stop();
                    mediaPlayer.stop();
                    timeline.stop();
                }
            }
        }));
        return text;
    }

    private Rectangle setRecTimer() {
        Rectangle rec = new Rectangle(122, 13);
        rec.setFill(Color.YELLOW);
        rec.setStroke(Color.BLACK);
<A NAME="4"></A>        rec.setArcWidth(10);
        rec.setArcHeight(10);

        <FONT color="#151b8d"><A HREF="javascript:ZweiFrames('match12-1.html#4',3,'match12-top.html#4',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>timeline.setCycleCount(Timeline.INDEFINITE);
        timeline.getKeyFrames().add(new KeyFrame(Duration.seconds(1), new EventHandler&lt;ActionEvent&gt;() {
            @Override
            public void handle(ActionEvent actionEvent) {
                rec.setWidth(rec.getWidth() - 1);
            }
        }));
        timeline.play</B></FONT>();
        return rec;
    }

    private Text setTextScore() {
        Text textField = new Text(&quot;Score: &quot; + score);
        textField.setFill(Color.YELLOW);
        return textField;
    }

    private Text setText(String text, Paint value) {
        Text text1 = new Text();
        text1.setText(text);
        text1.setFill(value);
        return text1;
    }

    private void ivSetup() {
        for (int i = 0; i &lt; 20; i++) {
            iv[i] = new ImageView();
            iv[i].setImage(image);
            iv[i].setFitWidth(100);
            iv[i].setFitHeight(100);
        }
    }

    void setUpReturnButton() {
        aReturn.setOnAction(actionEvent -&gt; {
            stage.setScene(new Scene(setOpeningScene(), 700, 600));
            timeline.stop();
            time.stop();
            start.setDisable(false);
        });
    }

    private Pane setPlayingScene() {
        setUpReturnButton();
        Pane pane = new Pane();
        background.setFitHeight(650);
        background.setFitWidth(700);
        pane.getChildren().add(background);
        Pane pane1 = new Pane();
        HBox hboxTop = new HBox();
        hboxTop.setPrefHeight(50);
        hboxTop.getChildren().add(setTextScore());
        hboxTop.setAlignment(Pos.CENTER);
        HBox hBoxCenter = new HBox();
        hBoxCenter.getChildren().addAll(start, aReturn);
        hBoxCenter.setAlignment(Pos.CENTER);
        HBox hBoxRight = new HBox();
        hBoxRight.getChildren().add(sound);
        hBoxRight.setAlignment(Pos.TOP_RIGHT);
<A NAME="5"></A>        HBox hboxBottom = new HBox();
        hboxBottom.setAlignment(Pos.CENTER);
        hboxTop.setSpacing(10);
        <FONT color="#c8c2a7"><A HREF="javascript:ZweiFrames('match12-1.html#5',3,'match12-top.html#5',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>hboxBottom.getChildren().addAll(setText(&quot;Time: &quot;, Color.YELLOW), setRecTimer(), setTimer());
        GridPane gridPane = new GridPane();
        BorderPane borderPane = new BorderPane();
        ivSetup();
        pane.getChildren().add(borderPane);
        borderPane.setTop(hboxTop);
        borderPane.setLeft(pane1);
        borderPane.setBottom</B></FONT>(hboxBottom);
<A NAME="6"></A>        borderPane.setCenter(hBoxCenter);
        borderPane.setRight(hBoxRight);
        pane1.getChildren().add(gridPane);
        <FONT color="#50ebec"><A HREF="javascript:ZweiFrames('match12-1.html#6',3,'match12-top.html#6',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>int i = 0;
        for (int row = 0; row &lt; 5; row++) {
            for (int column = 0; column &lt; 4; column++) {
                gridPane.add(iv[i], row, column);
                i++;
            }
        }
        start.setOnAction</B></FONT>(actionEvent -&gt; {
            setRandomIv();
            time.play();
            timeline.play();
            start.setDisable(true);
        });
        stage.setTitle(&quot;Playing Scene&quot;);
        return pane;
    }

    private void setRandomIv() {
        var ref = new Object() {
            int check = 0;
            int[] checking = {0};
        };

        randomPlayer = model.getRandPlayer();
        for (int j = 0; j &lt; 20; j++) {
            int finalJ = j;
            iv[j].setOnMouseClicked(mouseEvent -&gt; {
                if (ref.check == 0 || ref.check == 1) {
                    if (ref.check == 0) {
                        selectedCard[0] = randomPlayer.get(finalJ);
                        selectedValue[0] = finalJ;
                    }
                    if (ref.check == 1) {
                        selectedCard[1] = randomPlayer.get(finalJ);
                        selectedValue[1] = finalJ;
                    }
                    rt = new RotateTransition(Duration.seconds(0.5), iv[finalJ]);
                    rt.setAxis(Rotate.Y_AXIS);
                    rt.setFromAngle(0);
                    rt.setToAngle(90);
                    iv[finalJ].setImage(new Image(randomPlayer.get(finalJ)));
                    rt.setFromAngle(90);
                    rt.setToAngle(180);
                    rt.setCycleCount(1);
                    rt.play();
                    ref.check++;
                    Timeline time1 = new Timeline();
                    time1.setCycleCount(Timeline.INDEFINITE);
                    time1.getKeyFrames().add(new KeyFrame(Duration.seconds(level), new EventHandler&lt;&gt;() {
                        @Override
                        public void handle(ActionEvent actionEvent) {
                            if (!selectedCard[1].equals(selectedCard[0])) {
                                selectedCard[1] = &quot; &quot;;
                                rt.setFromAngle(0);
                                rt.setToAngle(90);
                                iv[finalJ].setImage(image);
                                rt.setFromAngle(90);
                                rt.setToAngle(180);
                                rt.play();
                                ref.check--;
                                time1.stop();
                            } else {
                                ref.check = 0;
                                time1.stop();
                            }
                        }
                    }));
                    time1.play();
                }
            });
        }
    }

    private void setUpQuitButton(int x, int y) {
        quitGame.setLayoutX(x);
        quitGame.setLayoutY(y);
        quitGame.setOnAction(actionEvent -&gt; {
            Platform.exit();
        });
    }

    private Pane setGameOverScene() {
        setUpQuitButton(335, 450);
        Text score = setTextScore();
        score.setLayoutX(305);
        score.setLayoutY(510);
<A NAME="7"></A>        ImageView iv = new ImageView(new Image(&quot;game_over.jpg&quot;));
        iv.setFitWidth(700);
        iv.setFitHeight(650);
        <FONT color="#c58917"><A HREF="javascript:ZweiFrames('match12-1.html#7',3,'match12-top.html#7',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>Pane pane = new Pane();
        pane.getChildren().add(iv);
        Button b = new Button(&quot;Play Again&quot;);
        b.setLayoutX(255);
        b.setLayoutY(450);
        pane.getChildren</B></FONT>().addAll(b, score, quitGame);
        b.setOnAction(actionEvent -&gt; {
            start.setDisable(false);
            stage.setScene(new Scene(setOpeningScene(), 700, 600));
        });
        return pane;
    }

    Pane setOpeningScene() {
        mediaPlayer.setStartTime(new Duration(0));
        mediaPlayer.play();
        ImageView iv = new ImageView(new Image(&quot;opening_scene.jpg&quot;));
        iv.setFitWidth(700);
        iv.setFitHeight(650);
        Button easy = new Button(&quot;Easy&quot;);
        easy.setLayoutX(275);
<A NAME="8"></A>        easy.setLayoutY(325);
        easy.setOnAction(actionEvent -&gt; {
            level = 3;
            <FONT color="#bce954"><A HREF="javascript:ZweiFrames('match12-1.html#8',3,'match12-top.html#8',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>stage.setScene(new Scene(setPlayingScene(), 700, 600));
        });
        Button medium = new Button(&quot;Medium&quot;);
        medium.setOnAction(actionEvent -&gt; {</B></FONT>
            level = 2;
            stage.setScene(new Scene(setPlayingScene(), 700, 600));
        });
        medium.setLayoutX(315);
        medium.setLayoutY(325);
        Button hard = new Button(&quot;Hard&quot;);
        hard.setOnAction(actionEvent -&gt; {
            level = 1;
            stage.setScene(new Scene(setPlayingScene(), 700, 600));
        });
<A NAME="9"></A>        hard.setLayoutX(375);
        hard.setLayoutY(325);
        Pane pane = new Pane();
        <FONT color="#f88017"><A HREF="javascript:ZweiFrames('match12-1.html#9',3,'match12-top.html#9',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>pane.getChildren().addAll(iv);
        pane.getChildren().addAll(easy, medium, hard, sound);
        sound.setLayoutX(540);
        sound.setLayoutY(50);
        stage.setTitle(&quot;Opening Scene&quot;);
        return pane;
    }</B></FONT>
}
</PRE>

</BODY>
</HTML>
