<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>trungngoquang</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>Assignment2_OOP/src/Main.java</CENTER></H3><HR>
<PRE>
import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

public class Main extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception{
<A NAME="0"></A>        Parent root = FXMLLoader.load(getClass().getResource(&quot;resources/view_fxml/main.fxml&quot;));
        primaryStage.setTitle(&quot;U22 Vietnam The Matching&quot;);
        primaryStage.setScene(new Scene(root));
        <FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match26-1.html#0',3,'match26-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>primaryStage.show();
    }


    public static void main(String[] args) {
        launch(args);
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>Assignment2_OOP/src/controllers/CardPuzzleController.java</CENTER></H3><HR>
<PRE>
<A NAME="6"></A><FONT color="#50ebec"><A HREF="javascript:ZweiFrames('match26-1.html#6',3,'match26-top.html#6',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>package controllers;

import javafx.animation.Interpolator;
import javafx.animation.RotateTransition;
import javafx.fxml.FXML;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.GridPane;
import javafx.scene.transform.Rotate;
import javafx.util.Duration;
import models.PlayerCard;
import models.PlayerCardList;
import models.Sound;

import java.util.Timer;
import java.util.TimerTask;

public class CardPuzzleController {

    @FXML private GridPane playerCardPuzzle;
    private MainController mainController</B></FONT>;      //Communicate with others controller through maincontroller
    private Sound cardFlipSound;                //Sound object for making card flipping sound
    private PlayerCardList playerCardList;      //List of playerCard objects
    private int cardFlippedCount;               //Maximum numbers of card can be flipped at a time
    private PlayerCard prevCardFlipped;         //Previous card being flipped, for comparing with the card being flipped right now
<A NAME="7"></A>    private int pairMatchedCount;               //Count number of pair matched

    //Injecting maincontroller
    <FONT color="#c58917"><A HREF="javascript:ZweiFrames('match26-1.html#7',3,'match26-top.html#7',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>public void injectMainController(MainController mainController){this.mainController = mainController;}

    @FXML public void initialize(){</B></FONT>}

    public CardPuzzleController(){
        cardFlipSound = new Sound(&quot;CARD_FLIPPING_SOUND&quot;);
        playerCardList = null;
        cardFlippedCount = 2;                   //Maximum numbers of card can be flipped at a time is 2
        prevCardFlipped = null;
        pairMatchedCount = 0;
<A NAME="8"></A>    }

    //Create RotateTransition object for card flipping animation
    public RotateTransition createflipAnimation(PlayerCard playerCard)<FONT color="#bce954"><A HREF="javascript:ZweiFrames('match26-1.html#8',3,'match26-top.html#8',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>{
        RotateTransition animation = new RotateTransition(Duration.millis(300), playerCard);
        animation.setAxis(Rotate.Y_AXIS);
        animation.setFromAngle(0);
        animation.setToAngle(180);
        animation.setInterpolator(Interpolator.LINEAR);
        animation.setCycleCount</B></FONT>(1);
        return animation;
    }

    //Flip open the playerCard action
    public void flipOpen(PlayerCard playerCard , Runnable action){
        RotateTransition flip = createflipAnimation(playerCard); //Create RotateTransition object
        flip.setOnFinished(e -&gt; action.run()); //After the card is flipped open,if this is the 2nd card being flipped at this time, check if it mactches the prev card being flipped
                                                //if not matched, flip close these 2 cards
        playerCard.setIsFlippedOpen(true);      //Set this card &quot;isFlippedOpen&quot; state
        flip.play();
        if (mainController.checkIsEnabledSound()) cardFlipSound.makeSound(); //If the sound is currently enabled, make a &quot;button clicked sound&quot;
        playerCard.setPlayerImage();
    }

    //Flip close the playerCard action
    public void flipClose(PlayerCard playerCard){
        RotateTransition flip = createflipAnimation(playerCard);
        playerCard.setIsFlippedOpen(false);
        flip.play();
        if (mainController.checkIsEnabledSound()) cardFlipSound.makeSound();
        playerCard.setDefaultImage();
<A NAME="9"></A>    }

    //Remove the current card list from the puzzle view
    public void removePrevCardList()<FONT color="#f88017"><A HREF="javascript:ZweiFrames('match26-1.html#9',3,'match26-top.html#9',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>{
        for (int i = 0; i &lt; playerCardList.getPlayerCardListSize(); i++){
            playerCardPuzzle.getChildren().remove(playerCardList.getPlayerCardByNo(i));
        }
    }

    //Method for creating new card list and put it on the card puzzle view
    public void createNewCardPuzzle(){</B></FONT>
        if (playerCardList != null) removePrevCardList();
        pairMatchedCount = 0;
        playerCardList = new PlayerCardList();
<A NAME="10"></A>        int tempCardNo = 0;
        for (int row = 0; row &lt; 4; row++) {
            for (int col = 0; col &lt; 5; col++) {
                PlayerCard playerCard = <FONT color="#b041ff"><A HREF="javascript:ZweiFrames('match26-1.html#10',3,'match26-top.html#10',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>playerCardList.getPlayerCardByNo(tempCardNo);
                setCardFlipEventHandler(playerCard);
                playerCardPuzzle.add(playerCard, col, row);
                tempCardNo++;
            }
        }
    }

    //Set the automatically flip-close time for the card being flipped open
    public void setCardCloseTime(PlayerCard playerCard){
        TimerTask timerTask = new TimerTask() {</B></FONT>
            @Override
            public void run() {
                //If (this card is currently flipped open) and (this card is not matched yet)
                if (playerCard.getIsFlippedOpen() &amp;&amp; !playerCard.getMatchedStatus()){
                    prevCardFlipped = null;
                    flipClose(playerCard);  //flip close this card
                    cardFlippedCount++;     //Enable the next click (card flipped)
                }
            }
        };
        int delay = (4 - mainController.getGameLevel()) * 1000; //Time set is based on the current game level
        Timer timer = new Timer(&quot;Timer&quot;);
        timer.schedule(timerTask, delay);
    }

    private void setCardFlipEventHandler(PlayerCard playerCard){
        playerCard.setOnMouseClicked((MouseEvent e)-&gt;{
            //If (the game is not running) or (the card is already flipped open) or (no more card flipping is allowed)
            if (!mainController.checkIsGameRunning() || playerCard.getIsFlippedOpen() || cardFlippedCount == 0) return; // do nothing

            //Note that 1 click has executed
            cardFlippedCount--;

            //If there is no previous card being flipped
            if (prevCardFlipped == null) {
                prevCardFlipped = playerCard;   //Remember this card as the &quot;previous card being flipped&quot; for comparing with the next flipped open card
                flipOpen(playerCard, ()-&gt;{});   //Flip open this card
                setCardCloseTime(playerCard);           //Set timer for this card to close if not successfully matched with the other same card

                //If there is a previous card being flipped to make the comparison
            } else {
                flipOpen(playerCard, () -&gt; {    //Flip this card open
                    if (prevCardFlipped != null &amp;&amp; playerCard.getPlayerCardID() == prevCardFlipped.getPlayerCardID()){ //If this card is the same as the previous flipped one
                        prevCardFlipped.setMatchedStatus(true);      //Set these 2 cards' matched status to true so that it wont be automatically flipped close
                        playerCard.setMatchedStatus(true);
                        pairMatchedCount++;                          //Increase the number of pairs have been matched
                        if (pairMatchedCount == 10) mainController.handleGameWon();  //If all the pairs have been matched, handle game win
                    } else { //If this card is no the same as the previous flipped one
                        if (prevCardFlipped != null) flipClose(prevCardFlipped); //Flip close the previous card
                        flipClose(playerCard);      //Flip close this card
                    }
                    prevCardFlipped = null;
                    cardFlippedCount = 2; //Allow for the next 2 click to flip the card
                });
            }
        });
    }
}
</PRE>
<HR>
<H3><CENTER>Assignment2_OOP/src/controllers/CountdownTimerController.java</CENTER></H3><HR>
<PRE>
<A NAME="1"></A>package controllers;

<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match26-1.html#1',3,'match26-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>import javafx.animation.KeyFrame;
import javafx.animation.Timeline;
import javafx.fxml.FXML;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.ProgressBar;
import javafx.scene.input.MouseEvent;
import javafx.util.Duration;
import models.CountDownTimer;
import models.Sound;

public class CountdownTimerController {

    @FXML private ProgressBar countdownProgressBar; //Progress bar displaying the time left to play
    @FXML private Button btnStartPauseGame;         //Start of pause game button
    @FXML private Button btnNewGame;       //Start a new game button
    @FXML private Label minutesLabel;      //Label displaying minutes
    @FXML private Label secondsLabel;      //Label displaying seconds
    @FXML private Label hundthsecsLabel</B></FONT>;   //Label displaying hundredth of a second

    private MainController mainController;
    private Sound btnClickedSound;                    //Sound object for making sound when pressing the button
    private Timeline timeLine;              //Timeline object to make countdown timer animation
    private CountDownTimer countDownTimer;           //Countdowntimer object from model

    //Injecting maincontroller
    public void injectMainController(MainController mainController){this.mainController = mainController;}

<A NAME="2"></A>    public CountdownTimerController(){
        countDownTimer = new CountDownTimer(2,0,0);
        btnClickedSound = new Sound(&quot;BUTTON_SOUND&quot;);
        timeLine = new Timeline(new KeyFrame(<FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match26-1.html#2',3,'match26-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>Duration.millis(16), e -&gt; updateTimer()));
        timeLine.setCycleCount(Timeline.INDEFINITE);
    }

    @FXML private void initialize(){</B></FONT>}

    //make a countdown at each keyframe of the timeline animation
    private void updateTimer(){
        //If the time is over, call method for handling this lost game
        if (!countDownTimer.countDown()) { timeLine.stop(); mainController.handleGameLost();}
        //Else update countdown timer view
        setTimerLabelAndProgressBar();
    }
<A NAME="3"></A>
    //Update the current countdown timer values to view labels and progress bar
    private void setTimerLabelAndProgressBar(){
        <FONT color="#6cc417"><A HREF="javascript:ZweiFrames('match26-1.html#3',3,'match26-top.html#3',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>minutesLabel.setText(String.format(&quot;%02d :&quot;, countDownTimer.getMinutes()));
        secondsLabel.setText(String.format(&quot;%02d :&quot;, countDownTimer.getSeconds()));
        hundthsecsLabel.setText(String.format(&quot;%02d&quot;, countDownTimer.getHundthsecs()));
        countdownProgressBar.setProgress(calculateTimerProgressBarValue());
    }</B></FONT>

    //Get the ratio between time left and the total time to display the time remaining on the progress bar
    private double calculateTimerProgressBarValue(){
        double timeRemain = countDownTimer.getMinutes() * 60 * 60 + countDownTimer.getSeconds() * 60 + countDownTimer.getHundthsecs();
        return timeRemain / (2 * 60 * 60);
    }

<A NAME="4"></A>    //Method handling start or pause game button
    @FXML private void btnStartPauseGameHandler(MouseEvent mouseEvent) {
        if (mainController.checkIsEnabledSound()) btnClickedSound.makeSound(); //If the sound is currently enabled, make a &quot;button clicked sound&quot;
        <FONT color="#151b8d"><A HREF="javascript:ZweiFrames('match26-1.html#4',3,'match26-top.html#4',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>if (!countDownTimer.isTimerRunning()){                   //If the timer is not running -&gt; game is being paused
            countDownTimer.setTimerRunning(true);                //Mark the timer as now running
            timeLine.play();                            //resume updating the timer view
            btnStartPauseGame.setText(&quot;Pause&quot;);         //Change the &quot;start or pause game button&quot; to &quot;Pause&quot; name
        } else {                //If the timer is currently running -&gt; game is being played
            countDownTimer.setTimerRunning(false);   //Mark the timer as now paused
            timeLine.pause();               //Pause updating the timer view
            btnStartPauseGame.setText(&quot;Start&quot;); //Change the &quot;start or pause game button&quot; to &quot;Start&quot; name
        }
    }</B></FONT>

    //Method handling newGame button
    @FXML private void btnNewGameHandler(MouseEvent mouseEvent) {
        if (mainController.checkIsEnabledSound()) btnClickedSound.makeSound(); //If the sound is currently enabled, make a &quot;button clicked sound&quot;
        timeLine.stop();                    //stop updating the timer view
        mainController.startNewGame();      //Start a new game
    }

    //Check if the the timer is running or not ? -&gt; game is running or not ?
    public boolean checkIsGameRunning(){
        return countDownTimer.isTimerRunning();
    }

    //Get the total of seconds elapsed
    public int getTimeElapsed(){
        return 120 - (countDownTimer.getMinutes() * 60 + countDownTimer.getSeconds());
    }

    //Stop the countdown timer
    public void stopTimer(){
        timeLine.stop();
<A NAME="5"></A>    }

    public void resetTimer(){
        <FONT color="#c8c2a7"><A HREF="javascript:ZweiFrames('match26-1.html#5',3,'match26-top.html#5',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>timeLine.stop();                    //stop updating the timer view
        countDownTimer.setTimerRunning(false);
        countDownTimer.setMinutes(2); countDownTimer.setSeconds(0); countDownTimer.setHundthsecs(0);   //Reset the timer minutes, seconds, hundthsecs value to the beginning
        btnStartPauseGame.setText(&quot;Start&quot;); //Change the &quot;start or pause game button&quot; to &quot;Start&quot; name
        setTimerLabelAndProgressBar();      //Update the timer view to be as in the beginning
    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>Assignment2_OOP/src/controllers/LevelController.java</CENTER></H3><HR>
<PRE>
<A NAME="16"></A>package controllers;

<FONT color="#3090c7"><A HREF="javascript:ZweiFrames('match26-1.html#16',3,'match26-top.html#16',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>import javafx.fxml.FXML;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.ComboBox;
import javafx.scene.control.Label;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.stage.Modality;
import javafx.stage.Stage;

public class LevelController {
    @FXML private Label gameLevelView;
    private MainController mainController</B></FONT>; //Communicate with others controller through maincontroller
    private int gameLevel;
<A NAME="17"></A>

    //Injecting maincontroller
    <FONT color="#800517"><A HREF="javascript:ZweiFrames('match26-1.html#17',3,'match26-top.html#17',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>public void injectMainController(MainController mainController){this.mainController = mainController;}

    //Make a popup window to let the user choose the game level
    public void promptGetLevelWindow()  {
        Stage startWindow = new</B></FONT> Stage();
        startWindow.initModality(Modality.APPLICATION_MODAL);
        startWindow.setTitle(&quot;U22 Vietnam The Matching&quot;);
<A NAME="18"></A>
        Label levelChoosingMessage = new Label(&quot;Please choose the game level&quot;);
        Label levelLabel = new Label(&quot;Level: &quot;);
        <FONT color="#f62817"><A HREF="javascript:ZweiFrames('match26-1.html#18',3,'match26-top.html#18',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>HBox levelChoosingHbox = new HBox(10);
        levelChoosingHbox.setAlignment(Pos.CENTER);
        ComboBox&lt;Integer&gt; levelBox = new ComboBox&lt;Integer&gt;();

        levelBox.getItems().addAll(1,2,3);
        levelBox.setValue(1);
        levelChoosingHbox.getChildren</B></FONT>().addAll(levelLabel, levelBox);
        Button finishBtn = new Button(&quot;Done!&quot;);

        finishBtn.setOnAction(e -&gt; {
            gameLevel = levelBox.getValue();
            updateGameLevelView();
            startWindow.close();
        });

        VBox layout = new VBox(10);
        layout.getChildren().addAll(levelChoosingMessage ,levelChoosingHbox, finishBtn);
        layout.setAlignment(Pos.CENTER);
<A NAME="19"></A>        Scene scene1 = new Scene(layout, 300, 250);
        startWindow.setScene(scene1);
        startWindow.showAndWait();
    <FONT color="#4e9258"><A HREF="javascript:ZweiFrames('match26-1.html#19',3,'match26-top.html#19',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>}

    //Get the current game level chosen by the user
    public int getGameLevel(){
        return gameLevel;
    }

    //Update the current game level being chosen to view
    public void updateGameLevelView(){</B></FONT>
        gameLevelView.setText(Integer.toString(gameLevel));
    }
}
</PRE>
<HR>
<H3><CENTER>Assignment2_OOP/src/controllers/MainController.java</CENTER></H3><HR>
<PRE>
<A NAME="12"></A>package controllers;

<FONT color="#3b9c9c"><A HREF="javascript:ZweiFrames('match26-1.html#12',3,'match26-top.html#12',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>import javafx.application.Platform;
import javafx.fxml.FXML;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;

import javafx.scene.layout.GridPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.stage.Modality;
import javafx.stage.Stage;
import javafx.stage.StageStyle;

public class MainController {
    @FXML private GridPane mainView;
    @FXML private SoundController soundController;
    @FXML private CardPuzzleController cardPuzzleController;
    @FXML private CountdownTimerController countdownTimerController;
    @FXML private LevelController levelController;
    @</B></FONT>FXML private ScoreController scoreController;

    //After the fxml files are loaded and all the nested controllers are loaded, this method is called by the program
    @FXML private void initialize(){
        injectMainControllerInNestedControllers();
        startNewGame(); //Start a new game for the user
    }

<A NAME="13"></A>    public void startNewGame(){
        levelController.promptGetLevelWindow();         //Make a popup window for getting user chosen level
        cardPuzzleController.createNewCardPuzzle();     //Create a new list of card and display on the puzzle view
        <FONT color="#842dce"><A HREF="javascript:ZweiFrames('match26-1.html#13',3,'match26-top.html#13',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>promptStartGameInstructionWindow();             //Show game instruction
        countdownTimerController.resetTimer();          //Reset the timer for
    }

    private void injectMainControllerInNestedControllers(){
        cardPuzzleController.injectMainController(this);
        soundController.injectMainController(this);
        countdownTimerController.injectMainController(this);
        levelController.injectMainController(this);
        scoreController.injectMainController(this);
    }

    public boolean checkIsEnabledSound(){</B></FONT>
        return soundController.getIsSoundEnabled();
    }

    //Get the current game chosen level
    public int getGameLevel(){return levelController.getGameLevel();}


    //Display a startup game instruction for the user to read and follow
    public void promptStartGameInstructionWindow(){
        Stage popUpWindow = new Stage();
        popUpWindow.initModality(Modality.APPLICATION_MODAL);
        popUpWindow.setTitle(&quot;Start Game Instruction&quot;);
        Label label1 = new Label(&quot;Please press the 'Start' button to start playing !&quot;);
        Label label2 = new Label(&quot;Press the 'Pause' button if you want to pause, then press 'Start' button again to resume playing.&quot;);
        Label label3 = new Label(&quot;Press the 'New Game' button if you want to play a different game.&quot;);
        Button finishBtn = new Button(&quot;Ok!&quot;);
        finishBtn.setOnAction(e -&gt; {
            popUpWindow.close();
        });
        VBox layout = new VBox(10);
<A NAME="14"></A>        layout.getChildren().addAll(label1, label2, label3 ,finishBtn);
        layout.setAlignment(Pos.CENTER);
        Scene startGameInstructScene = new Scene(layout,600, 250);
        <FONT color="#f52887"><A HREF="javascript:ZweiFrames('match26-1.html#14',3,'match26-top.html#14',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>popUpWindow.setScene(startGameInstructScene);
        popUpWindow.showAndWait();
    }

    //Display game won message, show score and time taken, then ask the user to play another game or quit
    public void promptGameWonWindow(int lastGameScore){
        Stage popUpWindow = new</B></FONT> Stage();
        popUpWindow.initModality(Modality.APPLICATION_MODAL);

        Label congratsMessage = new Label(&quot;Congratulations, you won!&quot;);

        //Announce the users their score and time taken to win previous game
        Label lastGameScoreLabel = new Label(&quot;You scored &quot; + lastGameScore + &quot; points in the last game in &quot;
                + countdownTimerController.getTimeElapsed() + &quot;second(s)&quot; );

        Button playAgainBtn = new Button(&quot;Play Again&quot;); //&quot;Play Again&quot; Button
        Button quitBtn = new Button(&quot;Quit&quot;);            //&quot;Quit&quot; Button

        //If the user click &quot;play again&quot; button
        playAgainBtn.setOnMouseClicked(e -&gt; {
            popUpWindow.close();  //Close this window
            startNewGame();        //Make a new game
        });

        //If the user click &quot;exit&quot; button
        quitBtn.setOnMouseClicked(e -&gt; {
            Platform.exit();        //Exit the game
            System.exit(0);
        });

        HBox hbox = new HBox(10);
        hbox.getChildren().addAll(playAgainBtn,quitBtn);
        hbox.setAlignment(Pos.CENTER);

        VBox layout = new VBox(15);
        layout.getChildren().addAll(congratsMessage,lastGameScoreLabel, hbox);
        layout.setAlignment(Pos.CENTER);
        Scene startGameInstructScene = new Scene(layout,500, 250);
        popUpWindow.setScene(startGameInstructScene);
        popUpWindow.initStyle(StageStyle.UNDECORATED);
        popUpWindow.show();

    }

    //Display game won message, ask the user to play another game or quit
    public void promptGameLostWindow(){
        Stage popUpWindow = new Stage();
        popUpWindow.initModality(Modality.APPLICATION_MODAL);

        Label lostMessage = new Label(&quot;Time over, you've lost the game!&quot;);

        Button playAgainBtn = new Button(&quot;Play Again&quot;);
        Button quitBtn = new Button(&quot;Quit&quot;);

        //If the user click &quot;play again&quot; button
        playAgainBtn.setOnMouseClicked(e -&gt; {
            popUpWindow.close();    //Close this window
            startNewGame();         //Make a new game
        });

        //If the user click &quot;exit&quot; button
        quitBtn.setOnMouseClicked(e -&gt; {
            Platform.exit();         //Exit the game
            System.exit(0);
        });

        HBox hbox = new HBox(10);
        hbox.getChildren().addAll(playAgainBtn,quitBtn);
        hbox.setAlignment(Pos.CENTER);

        VBox layout = new VBox(15);
        layout.getChildren().addAll(lostMessage, hbox);
        layout.setAlignment(Pos.CENTER);
        Scene startGameInstructScene = new Scene(layout,500, 250);
        popUpWindow.setScene(startGameInstructScene);
        popUpWindow.initStyle(StageStyle.UNDECORATED);
        popUpWindow.show();
    }

    public boolean checkIsGameRunning(){
        return countdownTimerController.checkIsGameRunning();
    }


    //Method Handling the case when the user won the game
    public void handleGameWon(){
        int lastGameScore = 120 - countdownTimerController.getTimeElapsed();    //calculate score
        countdownTimerController.stopTimer();       //Stop the timer
        scoreController.updateGameScoreView(lastGameScore); //Update total score
        promptGameWonWindow(lastGameScore);
    }

    //Method Handling the case when the user won the game
    public void handleGameLost(){
        countdownTimerController.stopTimer();       //Stop the timer
        promptGameLostWindow();
    }
}
</PRE>
<HR>
<H3><CENTER>Assignment2_OOP/src/controllers/ScoreController.java</CENTER></H3><HR>
<PRE>
package controllers;

import javafx.fxml.FXML;
import javafx.scene.control.Label;

public class ScoreController {
    @FXML private Label gameScoreView;
<A NAME="15"></A>    private MainController mainController; //Communicate with others controller through maincontroller

    public ScoreController(){}
    @FXML private void initialize(){<FONT color="#3bb9ff"><A HREF="javascript:ZweiFrames('match26-1.html#15',3,'match26-top.html#15',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>}

    //Injecting maincontroller
    public void injectMainController(MainController mainController){this.mainController = mainController;}

    //Update the total score
    public void updateG</B></FONT>ameScoreView(int lastGameScore){
        int newScore = Integer.parseInt(gameScoreView.getText()) + lastGameScore;
        gameScoreView.setText(Integer.toString(newScore));
    }


}
</PRE>
<HR>
<H3><CENTER>Assignment2_OOP/src/controllers/SoundController.java</CENTER></H3><HR>
<PRE>
package controllers;

import javafx.fxml.FXML;
import javafx.scene.control.Button;
import javafx.scene.image.Image;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.*;
<A NAME="11"></A>import models.Sound;

public class SoundController {
    <FONT color="#571b7e"><A HREF="javascript:ZweiFrames('match26-1.html#11',3,'match26-top.html#11',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>private static final String SOUND_ON_IMG_URL = &quot;file:src/resources/images/sound_on.jpg&quot;;
    private static final String SOUND_OFF_IMG_URL = &quot;file:src/resources/images/sound_off.jpg&quot;;

    @FXML private Button soundEnabledBtn;              //Sound enabled Button in fxml
    private MainController mainController;            //Communicate with others controller through maincontroller

    private Sound btnSound;                           //Button sound object, for making sound when pressing the sound enabled button
    private boolean isEnabledSound;                   //Variable checking if the sound of the system is on
    private Image soundOnImg;                         //Image object for loading &quot;sound on&quot; image from resources
    private Image soundOffImg;                        //Image object for loading &quot;sound off&quot; image from resources
    private Background bgSoundOnImg;                  //Background object for setting &quot;sound on&quot; image as soundEnabledBtn background image
    private Background bgSoundOffImg;                 //Background object for setting &quot;sound off&quot; image as soundEnabledBtn background image
    private Sound backgroundMusic</B></FONT>;                    //Sound object for playing background music

    //Injecting maincontroller
    public void injectMainController(MainController mainController){this.mainController = mainController;}

    public SoundController(){
        isEnabledSound = true;                                                        //Sound is enabled at first
        btnSound = new Sound(&quot;BUTTON_SOUND&quot;);                              //Create a &quot;button sound&quot; object
        backgroundMusic = new Sound(&quot;BACKGROUND_MUSIC&quot;);                   //Create a &quot;background music&quot; sound object
        soundOnImg = new Image(SOUND_ON_IMG_URL);         //Load &quot;sound on&quot; image object for sound enabled button
        soundOffImg = new Image(SOUND_OFF_IMG_URL);       //Load &quot;sound off&quot; image object for sound enabled button
    }

    public void initialize(){
        setSoundEnableButtonImage();    //Create BackgroundImage object for setting background image of the sound button
        setSoundEnableBtnEventHandler();      //Set On Mouse Click event handler for the sound enabled button
    }

    public void setSoundEnableButtonImage(){
        bgSoundOnImg = new Background(new BackgroundImage(soundOnImg, BackgroundRepeat.NO_REPEAT, BackgroundRepeat.NO_REPEAT, BackgroundPosition.CENTER, new BackgroundSize(soundEnabledBtn.getWidth(), soundEnabledBtn.getHeight(), true, true, true, false)));
        bgSoundOffImg = new Background(new BackgroundImage(soundOffImg, BackgroundRepeat.NO_REPEAT, BackgroundRepeat.NO_REPEAT, BackgroundPosition.CENTER, new BackgroundSize(soundEnabledBtn.getWidth(), soundEnabledBtn.getHeight(), true, true, true, false)));
        soundEnabledBtn.setBackground(bgSoundOnImg);    //At first, the sound is already on and the background image is &quot;sound on&quot; image
    }

    public void setSoundEnableBtnEventHandler() {
        soundEnabledBtn.setOnMouseClicked((MouseEvent e) -&gt; {
            btnSound.makeSound();                                   //Make &quot;button sound&quot; when clicked
            //If the system's sound is enabled
            if (isEnabledSound){
                isEnabledSound = false;                         //Set the system's sound to mute state
                backgroundMusic.pauseBackgroundMusic();         //Stop playing background music
                soundEnabledBtn.setBackground(bgSoundOffImg);   //Set &quot;sound off&quot; background image for soundEnabledBtn
            }else{ //If the system's sound is being muted
                isEnabledSound = true;                          //Set the system's sound to on state
                backgroundMusic.resumeBackgroundMusic();        //Resume playing background music
                soundEnabledBtn.setBackground(bgSoundOnImg);    //Set &quot;sound on&quot; background image for soundEnabledBtn
        }
        });
    }

    public boolean getIsSoundEnabled(){
        return isEnabledSound;
    }
}
</PRE>
<HR>
<H3><CENTER>Assignment2_OOP/src/models/CountDownTimer.java</CENTER></H3><HR>
<PRE>
package models;
<A NAME="20"></A>
public class CountDownTimer {
    private int minutes ;               //Minutes
    <FONT color="#d4a017"><A HREF="javascript:ZweiFrames('match26-1.html#20',3,'match26-top.html#20',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>private int seconds ;               //Seconds
    private int hundthsecs ;            //Hundredth of a second
    private boolean isTimerRunning;     //is the Timer running ?

    public CountDownTimer(int minutes, int seconds, int hundthsecs){
        this.minutes = minutes;
        t</B></FONT>his.seconds = seconds;
        this.hundthsecs = hundthsecs;
<A NAME="21"></A>        isTimerRunning = false;
    }

    <FONT color="#00ff00"><A HREF="javascript:ZweiFrames('match26-1.html#21',3,'match26-top.html#21',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>public int getMinutes() {
        return minutes;
    }

    public void setMinutes(int minutes) {
        this.minutes = minutes;
    }

    public int getSeconds() {
        return seconds;
    }

    public void setSeconds(int seconds) {
        this.seconds = seconds;
    }

    public int getHundthsecs() {
        return hundthsecs;
    }

    public void setHundthsecs(int hundthsecs) {
        this.hundthsecs = hundthsecs;
<A NAME="22"></A>    }

    public boolean isTimerRunning() {</B></FONT>
        <FONT color="#4cc417"><A HREF="javascript:ZweiFrames('match26-1.html#22',3,'match26-top.html#22',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>return isTimerRunning;
    }

    public void setTimerRunning(boolean timerRunning) {
        isTimerRunning = timerRunning;
    }

    //Timer make a countdown
    public boolean countDown(){</B></FONT>
        if (minutes != 0){
            if (seconds != 0) {
                if (hundthsecs != 0) hundthsecs--;
                else {seconds--; hundthsecs = 59;}
            } else {
                if (hundthsecs != 0) hundthsecs--;
                else {minutes--; seconds = 59; hundthsecs = 59;}
            }
        } else {
            if (seconds != 0) {
                if (hundthsecs != 0) hundthsecs--;
                else {seconds--; hundthsecs = 59;}
            } else {
                if (hundthsecs != 0) hundthsecs--;
                else return false;
            }
        }
        return true;
    }
}
</PRE>
<HR>
<H3><CENTER>Assignment2_OOP/src/models/PlayerCard.java</CENTER></H3><HR>
<PRE>
<A NAME="25"></A>package models;

<FONT color="#87f717"><A HREF="javascript:ZweiFrames('match26-1.html#25',3,'match26-top.html#25',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.Pane;

//object representing each card in the card puzzle, which is a Pane
public class PlayerCard extends Pane {
    private ImageView imageViewer;          //ImageView object for displaying player card image
    private Image defaultImage;             //default image object for to hide the actual player object behind
    private Image playerImage;              //player image object storing the image of U22VN player
    private int playerCardID;               //Card id for comparing 2 cards if it is matched
    private boolean isFlippedOpen</B></FONT>;          //Variable checking if the card object is being flipped open revealing the player image
    private boolean matchedStatus;          //Variable marking this card as has been matched

    public PlayerCard(int imageNo){
        playerCardID = imageNo;
        isFlippedOpen = false;              //player image is hide as default
<A NAME="26"></A>        matchedStatus = false;              //this card is not matched at first
        this.getStyleClass().add(&quot;playerCard&quot;);     //Add CSS class name for css styling
        defaultImage = new Image(&quot;file:src/resources/images/soccerball.png&quot;);               //Load the default image from resources
        playerImage = new Image(&quot;file:src/resources/images/player&quot;+ <FONT color="#95b9c7"><A HREF="javascript:ZweiFrames('match26-1.html#26',3,'match26-top.html#26',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>Integer.toString(imageNo) +&quot;.jpg&quot;);   //Load the player image from resource based on imageNo
        imageViewer = new ImageView(defaultImage);  //Create imageViewer object to display image
        setDefaultImage();                          //Set the default image for this card at first, hiding the player image behind
        getChildren().add(imageViewer);             //Add the image viewer object to the Pane
    }
<A NAME="27"></A>
    //Method for displaying default image for this card
    public void set</B></FONT>DefaultImage(){
        <FONT color="#e77471"><A HREF="javascript:ZweiFrames('match26-1.html#27',3,'match26-top.html#27',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>imageViewer.setImage(defaultImage);
        imageViewer.setFitWidth(80);
        imageViewer.setFitHeight(65);
        imageViewer.setX(33);
        imageViewer.setY(38);
    }
<A NAME="28"></A>
    //Method for displaying player image for this card
    public void setPlayerImage(){</B></FONT>
        <FONT color="#717d7d"><A HREF="javascript:ZweiFrames('match26-1.html#28',3,'match26-top.html#28',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>imageViewer.setImage(playerImage);
        imageViewer.setFitWidth(135.9);
        imageViewer.setFitHeight(142);
        imageViewer.setX(5);
        imageViewer.setY(5);
<A NAME="29"></A>    }

    public void setMatchedStatus(boolean matchedStatus){</B></FONT>
        <FONT color="#faafba"><A HREF="javascript:ZweiFrames('match26-1.html#29',3,'match26-top.html#29',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>this.matchedStatus = matchedStatus;
    }

    public boolean getMatchedStatus(){
        return this.matchedStatus;
    }

    public int getPlayerCardID(){
        return playerCardID;
    }

    public boolean getIsFlippedOpen(){
        return isFlippedOpen;
    }

    public void setIsFlippedOpen(boolean isFlippedOpen){
        this.isFlippedOpen = isFlippedOpen;
    }

}</B></FONT>
</PRE>
<HR>
<H3><CENTER>Assignment2_OOP/src/models/Sound.java</CENTER></H3><HR>
<PRE>
<A NAME="23"></A>package models;

import javafx.scene.media.Media;
<FONT color="#f660ab"><A HREF="javascript:ZweiFrames('match26-1.html#23',3,'match26-top.html#23',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>import javafx.scene.media.MediaPlayer;

import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;
import java.net.URL;

public class Sound {
    private static final String BUTTON_SOUND_URL = &quot;../resources/sound/button_sound.wav&quot;;
    private static final String CARD_FLIPPING_SOUND_URL = &quot;../resources/sound/cardflip_sound.wav&quot;;
    private static final String BACKGROUND_MUSIC_URL = &quot;../resources/sound/backgroundsong.mp3&quot;;

    private static final String BUTTON_SOUND_TYPE = &quot;BUTTON_SOUND&quot;;
    private static final String BACKGROUND_MUSIC_TPYE = &quot;BACKGROUND_MUSIC&quot;;
    private static final String CARD_FLIPPING_SOUND_TYPE = &quot;CARD_FLIPPING_SOUND&quot;;

    private Clip sound</B></FONT>;
    private MediaPlayer backgroundMusic ;

    public Sound(String soundType){
        //Creating an &quot;button clicking sound&quot; object
        if (soundType.equals(BUTTON_SOUND_TYPE)){
<A NAME="24"></A>            try {
                AudioInputStream soundInputStream = AudioSystem.getAudioInputStream(getClass().getResourceAsStream(BUTTON_SOUND_URL));
                sound = AudioSystem.getClip();
                <FONT color="#ada96e"><A HREF="javascript:ZweiFrames('match26-1.html#24',3,'match26-top.html#24',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>sound.open(soundInputStream);
            }catch(Exception e){
                System.out.println(&quot;Cannot load button sound&quot;);
            }

            //Creating a &quot;background music&quot; object
        }</B></FONT> else if (soundType.equals(BACKGROUND_MUSIC_TPYE)) {
            try {
                URL resource = getClass().getResource(BACKGROUND_MUSIC_URL);
                backgroundMusic = new MediaPlayer(new Media(resource.toString()));
                backgroundMusic.setCycleCount(MediaPlayer.INDEFINITE);
                backgroundMusic.setVolume(0.1);
                backgroundMusic.play(); //play the music immediately after being loaded

            }catch (Exception e){
                System.out.println(&quot;Cannot load background music&quot;);
            }

            //Creating a &quot;card flipping sound&quot; object
        } else if (soundType.equals(CARD_FLIPPING_SOUND_TYPE)){
            try {
                AudioInputStream soundInputStream = AudioSystem.getAudioInputStream(getClass().getResourceAsStream(CARD_FLIPPING_SOUND_URL));
                sound = AudioSystem.getClip();
                sound.open(soundInputStream);
            }catch(Exception e){
                System.out.println(&quot;Cannot load card flip sound&quot;);
            }
        }
    }

    //Method for this sound object to make button pressed sound
    public void makeSound(){
        sound.setFramePosition(0);
        sound.start();
    }

    //Method for calling background music to stop playing
    public void pauseBackgroundMusic(){
        backgroundMusic.pause();
    }

    //Method for calling background music to resume playing
    public void resumeBackgroundMusic(){
        backgroundMusic.play();
    }
}
</PRE>

</BODY>
</HTML>
